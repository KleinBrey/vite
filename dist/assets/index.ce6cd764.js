import{p as e,a as o,u as s,bo as a,b as l,r as t,o as r,bp as d,bq as n,e as i,f as u,g as c,h as m,i as p,br as g,k,l as f}from"./vendor.6eb48644.js";import{s as b}from"./index.78e1ba97.js";const h={setCookie:(e,o,s)=>{let a=new Date;a.setTime(a.getTime()+864e5*s),window.document.cookie="userName="+e+";path=/;expires="+a.toGMTString(),window.document.cookie="passWord="+o+";path=/;expires="+a.toGMTString()},getCookie:()=>{if(document.cookie.length>0){let e={},o=document.cookie.split("; ");for(let s=0;s<o.length;s++){let a=o[s].split("=");e[a[0]]=a[1],Object.assign(e)}return e}},clearCookie:()=>{h.setCookie("","",-1)}};const C=k();e("data-v-09d8278a");const v={class:"login"},w={class:"logincontent"},N=f("登录"),_=f("注册"),W=m("span",{class:"tag"},"THRASHER",-1);o();const y={setup(e){const o=s(),k=a(),f=l(null),y=t({model:{userName:"",passWord:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"},{min:2,message:"密码长度必须不小于2位",trigger:"blur"}]}}),S=()=>{f.value.validate((async e=>{e&&(o.dispatch("setToken").then((e=>{e&&k.push({path:"/dashboard"})})).catch((e=>console.log(e))),h.setCookie(y.model.userName,y.model.passWord,5))}))},T=()=>{b.removeValue("ACCESS_TOKEN")},V=e=>{13===e.keyCode&&S()};r((()=>{document.addEventListener("keydown",V),y.model.userName=h.getCookie().userName,y.model.passWord=h.getCookie().passWord})),d((()=>{document.removeEventListener("keydown",V)}));const{model:x,rules:E}=n(y);return(e,o)=>{const s=i("search"),a=i("el-icon"),l=i("el-input"),t=i("el-form-item"),r=i("el-button"),d=i("el-form");return u(),c("div",v,[m(a,{style:{"vertical-align":"middle"}},{default:C((()=>[m(s)])),_:1}),m("div",w,[m(d,{model:p(x),rules:p(E),ref:f,class:"rule-form"},{default:C((()=>[m(t,{prop:"userName"},{default:C((()=>[m(l,{clearable:"",modelValue:p(x).userName,"onUpdate:modelValue":o[1]||(o[1]=e=>p(x).userName=e),placeholder:"请输入用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])])),_:1}),m(t,{prop:"passWord"},{default:C((()=>[m(l,{clearable:"",type:"password","show-password":"",modelValue:p(x).passWord,"onUpdate:modelValue":o[2]||(o[2]=e=>p(x).passWord=e),placeholder:"请输入密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])])),_:1}),m(t,null,{default:C((()=>[m(r,{type:"primary",onClick:g(S,["prevent"])},{default:C((()=>[N])),_:1},8,["onClick"]),m(r,{onClick:T},{default:C((()=>[_])),_:1})])),_:1}),m("span",{title:"测试用户 直接登录",class:"secret",onClick:o[3]||(o[3]=(...o)=>e.noSecret&&e.noSecret(...o))},"免密登录"),W])),_:1},8,["model","rules"])])])}},__scopeId:"data-v-09d8278a"};export default y;
